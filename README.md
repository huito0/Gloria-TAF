## Тестовый фреймворк для UI тестов

### Описание проекта:

Для подключения на проект - форкаем репозиторий, описываем страницы в пакете Pages, описываем шаги в StepDefs и пишем фича файлы

#### BaseTest

- Before хук
- After хук

> After хук переопределен с помощью Event Publisher. То есть отслеживается конец __ВСЕХ__ тестов

#### BlockFactory

Содержит декораторы позволяющие реализовывать Page Element паттерн вместо Page Object паттерна.

> В двух словах. Наша страница состоит из блоков, блоки состоят из элементов.
> По умлочанию, HtmlElements игнормирует контекст блоков при обращении к элементу.
> 
> Допустим у нас есть элемент //div[@class = 'phone-number']
> в блоке //div[@class = 'header'] и в блоке //div[@class = 'footer']
>
> Для избежания случая, с неточным определением локатора нам бы пришлось создавать 2 элемента headerPhone и footerPhone
> с локаторами //div[@class = 'header']//div[@class = 'phone-number'] и //div[@class = 'footer']//div[@class = 'phone-number'].
> Эта концепция идет вразрез с прнципом программирования DRY. *Если повторяющихся элементов на странице много. (для каждого придется приписывать префикс в виде локатора блока)*
>
> Для того, чтобы не писать сложные локаторы, я обернул классы HtmlElements таким образом, чтобы учитывался конеткст блоков.
> То есть мы пишем Java Класс, который наследуется от HtmlElement класса и он определяется на странице как элемент со своим локатором.
> В нашем случае мы на нашей странице создаем два элемента **private Header header** с локатором //div[@class = 'header']
> и **private Footer footer** с локатором //div[@class = 'footer']. а уже внутри каждого создаем элемент
> **private HtmlElements phone** с локатором //div[@class = 'phone-number'] а при инициализации локаторы будут конкатенироваться автоматически
> 
> **ВАЖНО** библиотека работает **ТОЛЬКО** с xpath локаторами
> 
> P.S. в случае с листом элементов локаторы будут модифицироваться автоматически так, чтобы при конкатенации обращаться именно к нужному элементу
> 
> Например: есть 10 блоков offer с локатором //div[@class = 'offer'], в каждом блоке есть кнопка //button, 
> чтобы кликнуть по кнопке 7-го блока мы выполняем код **offers.get(6).clickButton();** и библиотека сама построит локатор кнопки
> (//div[@class = 'offer'])[7]//button

#### CLIOptions

Класс с глобальными настройками тестов. Принимает следующие настройки из консоли:

- --browser *- на данный момент полностью работает с CHROME. FREFOX не тестировался*
- --timeout (30 by default) *- время в секундах для ожидания элемента на странице*
- --tags (@Regression by default) *- Тэг теста из фича файла для запуска*
- --glue (StepDefs,BaseTest by default) *- пакеты в которых хранятся шаги для кукумбера*
- --plugin (pretty,json,BaseTest.BaseTest,Report.ScreenshotPublisher by default) *- плагины для кукумбера, BaseTest - для реализации before и after хуков, Report - для создания отчета, ScreenshotPublisher - для публикации скриншотов*
- --features (src/main/resources/Features by default) *- каталог с фичафайлами*
- --chromeOptions (--app=$HUB_URL by default) *- опции для запуска хрома*
- --hub *- адрес развернутого хаба или селениум сервера*
- --environment *- окружение, для конфигурации пути выкладки отчетов*
- --host *- устанавливает хост адрес приложения*

> Лист аргументов пишется через пробел, если аргумент содержит несколько параметров, они указываются через запятую **без пробелов**
> 
> Например, для запуска всех тестов из примера: 
> 
> --tags @Example --environment localhost --hub http://localhost:4444/wd/hub --host http://rambler.ru --chromeOptions --start-maximized
> 
> а для запуска отдельных тестов:
> 
> --tags @OpenPageExample,@OpenPageExample1 --environment localhost --hub http://localhost:4444/wd/hub --host http://rambler.ru --chromeOptions --start-maximized

#### DriverManager

Содержит синглтон с драйвером

#### Logger

Вывод сообщений из тестов в консоль и отчет.

#### Pages

Здесь самый главный класс страниц - AbstractPage. Все кастомные страницы должны наследоваться от него.

#### Reports

Классы отвечающие за построение отчета и выкладку скриншотов

#### Runner 

Входная точка в приложение тестов

#### StepDefs

Здесь самый главный класс шагов - AbstractStepDefs. Все StepDefs должны наследоваться от него.

#### Utils

Разные утилиты, для работы с шириной экрана, нахождения локаторов элементов, настройки окружения и скриншотов